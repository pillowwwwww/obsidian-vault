# ğŸ”¤ ä»åˆ†æ•£æ•°æ®ä¸­å¯¹æ·±ç½‘çš„æ²Ÿé€šæœ‰æ•ˆå­¦ä¹  (2016, McMahan) ()

**åŸåï¼š**Communication-Efficient Learning of Deep Networks from Decentralized Data

**è¯‘åï¼š** ä»åˆ†æ•£æ•°æ®ä¸­å¯¹æ·±ç½‘çš„æ²Ÿé€šæœ‰æ•ˆå­¦ä¹ 

**ä½œè€…ï¼š**McMahan et al.

**æœŸåˆŠï¼š**

**IFQï¼š**

**DOIï¼š** [10.48550/ARXIV.1602.05629](https://doi.org/10.48550/ARXIV.1602.05629)

**å‘è¡¨æ—¶é—´ï¼š**2016

**æœ¬åœ°é“¾æ¥:** [@Communication-Efficient Learning of Deep Networks from Decentralized Data.md](zotero://open-pdf/0_X7LVARNS)

ç¬”è®°ä¸€å®šè¦å…ˆåœ¨zoteroä¸Šå†™ï¼Œå†åŒæ­¥åˆ°obsidianä¸Šã€‚æ¯æ¬¡ä¸æ”¾å¿ƒå¯ä»¥å…ˆå¤‡ä»½ä¸€ä¸‹ã€‚

å®éªŒéƒ¨åˆ†æˆ‘ç¬”è®°å†™çš„å¾ˆè¯¦ç»†ï¼Œå¯ä»¥åªçœ‹ç¬”è®°ã€‚é‡ç‚¹æ˜¯å­¦æ€è·¯ã€‚

**æ‘˜è¦ç¿»è¯‘ï¼š** _ç°ä»£ç§»åŠ¨è®¾å¤‡å¯ä»¥è®¿é—®é€‚åˆå­¦ä¹ æ¨¡å‹çš„å¤§é‡æ•°æ®ï¼Œè¿›è€Œå¯ä»¥å¤§å¤§æ”¹å–„è®¾å¤‡ä¸Šçš„ç”¨æˆ·ä½“éªŒã€‚ä¾‹å¦‚ï¼Œè¯­è¨€æ¨¡å‹å¯ä»¥æ”¹å–„è¯­éŸ³è¯†åˆ«å’Œæ–‡æœ¬è¾“å…¥ï¼Œå¹¶ä¸”å›¾åƒæ¨¡å‹å¯ä»¥è‡ªåŠ¨é€‰æ‹©å¥½ç…§ç‰‡ã€‚ä½†æ˜¯ï¼Œè¿™äº›ä¸°å¯Œçš„æ•°æ®é€šå¸¸å¯¹éšç§æ•æ„Ÿï¼Œæ•°é‡è¾ƒå¤§æˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ï¼Œè¿™å¯èƒ½æ’é™¤è®°å½•åˆ°æ•°æ®ä¸­å¿ƒå¹¶ä½¿ç”¨å¸¸è§„æ–¹æ³•è®­ç»ƒé‚£é‡Œã€‚æˆ‘ä»¬ä¸»å¼ ä¸€ç§å°†åŸ¹è®­æ•°æ®ç•™åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ›¿ä»£æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡æ±‡æ€»æœ¬åœ°è®¡ç®—çš„æ›´æ–°æ¥å­¦ä¹ å…±äº«æ¨¡å‹ã€‚æˆ‘ä»¬è®¤ä¸ºè¿™ç§åˆ†æ•£çš„æ–¹æ³•è”åˆå­¦ä¹ ã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ç§åŸºäºè¿­ä»£æ¨¡å‹å¹³å‡çš„è”é‚¦å­¦ä¹ æ·±åº¦ç½‘ç»œå­¦ä¹ çš„å®ç”¨æ–¹æ³•ï¼Œå¹¶è€ƒè™‘äº†äº”ä¸ªä¸åŒçš„æ¨¡å‹æ¶æ„å’Œå››ä¸ªæ•°æ®é›†ï¼Œå¹¶è¿›è¡Œäº†å¹¿æ³›çš„ç»éªŒè¯„ä¼°ã€‚è¿™äº›å®éªŒè¯æ˜äº†è¯¥æ–¹æ³•å¯¹è¿™ç§è®¾ç½®çš„å®šä¹‰ç‰¹å¾çš„ä¸å¹³è¡¡å’ŒéIIDæ•°æ®åˆ†å¸ƒæ˜¯é²æ£’çš„ã€‚æ²Ÿé€šæˆæœ¬æ˜¯ä¸»è¦é™åˆ¶ï¼Œä¸åŒæ­¥éšæœºæ¢¯åº¦ä¸‹é™ç›¸æ¯”ï¼Œæˆ‘ä»¬æ˜¾ç¤ºæ‰€éœ€çš„é€šä¿¡å›åˆå‡å°‘äº†10-100å€ã€‚_

# ğŸŒç ”ç©¶èƒŒæ™¯ï¼š

### âœ… ä¸€ã€ç†æƒ³çš„è”é‚¦å­¦ä¹ é—®é¢˜åº”å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š

1. **åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè®­ç»ƒæ¯”åœ¨æ•°æ®ä¸­å¿ƒç”¨ä»£ç†æ•°æ®è®­ç»ƒæ›´æœ‰ä¼˜åŠ¿**  
    ğŸ‘‰ å› ä¸ºçœŸå®ç”¨æˆ·çš„æ•°æ®æ¯”â€œå…¬å…±æ•°æ®é›†â€æ›´è´´åˆå®é™…ä»»åŠ¡ï¼Œæ¯”å¦‚ä½ æ‰‹æœºä¸Šçš„è¾“å…¥è¡Œä¸ºï¼Œæ¯”Wikipediaçš„è¯­æ–™æ›´é€‚åˆè®­ç»ƒè¾“å…¥æ³•ã€‚
2. **æ•°æ®å…·æœ‰éšç§æ•æ„Ÿæ€§æˆ–ä½“é‡å¤ªå¤§ï¼Œä¸é€‚åˆä¸Šä¼ åˆ°æ•°æ®ä¸­å¿ƒ**  
    ğŸ‘‰ æ¯”å¦‚ç”¨æˆ·ç…§ç‰‡ã€èŠå¤©è®°å½•ã€å¯†ç ç­‰éšç§æ•°æ®ï¼Œæˆ–è€…ç”¨æˆ·æ‰‹æœºä¸­æ•°é‡åºå¤§çš„å›¾åƒï¼Œä¸åº”ä¸ºäº†è®­ç»ƒå°±å…¨éƒ¨ä¸Šä¼ æœåŠ¡å™¨ã€‚
3. **ç›‘ç£å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œæ ‡ç­¾å¯ä»¥è‡ªç„¶åœ°ä»ç”¨æˆ·äº¤äº’ä¸­è·å¾—**  
    ğŸ‘‰ ä¾‹å¦‚ï¼š
    
    - ç”¨æˆ·è¾“å…¥çš„æ–‡å­—å¤©ç„¶å°±æ˜¯è¯­è¨€æ¨¡å‹çš„è®­ç»ƒæ ‡ç­¾ï¼›
    - å“ªäº›ç…§ç‰‡è¢«å¤šæ¬¡æŸ¥çœ‹æˆ–åˆ†äº«ï¼Œå¯ä»¥ä½œä¸ºå›¾åƒçš„â€œé‡è¦æ€§æ ‡ç­¾â€ã€‚

### âœ… äºŒã€ä¸¤ä¸ªéå¸¸å…¸å‹ä¸”é€‚åˆè”é‚¦å­¦ä¹ çš„ä»»åŠ¡ï¼š

#### ğŸ–¼ å›¾åƒåˆ†ç±»

- ä¾‹å­ï¼šé¢„æµ‹å“ªäº›ç…§ç‰‡ä¼šè¢«å¤šæ¬¡æŸ¥çœ‹æˆ–åˆ†äº«ã€‚
- ç”¨æˆ·æ•°æ®ç‰¹ç‚¹ï¼š
    
    - åŒ…å«å¤§é‡ä¸ªäººç…§ç‰‡ï¼›
    - ä¸Flickrè¿™ç±»å¼€æºæ•°æ®é›†å·®å¼‚å¤§ï¼›
    - è®­ç»ƒæ ‡ç­¾å¯ä»ç”¨æˆ·è¡Œä¸ºï¼ˆåˆ é™¤/æŸ¥çœ‹/åˆ†äº«ï¼‰ä¸­è·å¾—ã€‚

#### ğŸ’¬ è¯­è¨€å»ºæ¨¡ï¼ˆå¦‚è¯­éŸ³è¯†åˆ«ã€è¾“å…¥æ³•ï¼‰

- ç”¨ä¾‹ï¼š
    - æå‡é”®ç›˜è¾“å…¥çš„ä¸‹ä¸€ä¸ªè¯é¢„æµ‹ã€æ•´å¥å›å¤ç­‰æ™ºèƒ½åŠŸèƒ½ï¼›
- æ•°æ®æ¥æºï¼šç”¨æˆ·å¹³æ—¶è¾“å…¥çš„æ–‡å­—ã€è¯­éŸ³ï¼ŒåŒ…æ‹¬ä¿¡æ¯ã€ç½‘å€ã€å¯†ç ç­‰æ•æ„Ÿå†…å®¹ï¼›
- æ•°æ®ç‰¹æ€§ï¼š

    - éšç§æ€§æå¼ºï¼›
    - è¡¨è¾¾æ–¹å¼ä¸å…¬å¼€è¯­æ–™åº“ï¼ˆå¦‚Wikipediaï¼‰å·®åˆ«å¤§ï¼›
    - è¾“å…¥å†…å®¹æœ¬èº«å°±æ˜¯è¯­è¨€æ¨¡å‹çš„â€œæ ‡ç­¾â€ã€‚

# ğŸ’§æ–°åè¯ï¼š

### ğŸ“Œ ä¸ºä»€ä¹ˆä¸€ä¸ªæ ·æœ¬å¯ä»¥å†™æˆ (x_i, y_i)ï¼Ÿ

åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼š

- $x_i$ï¼šè¡¨ç¤º**è¾“å…¥ç‰¹å¾**ï¼ˆfeature vectorï¼‰ï¼›
- $y_i$ï¼šè¡¨ç¤º**è¾“å‡ºæ ‡ç­¾**ï¼ˆlabelï¼‰ï¼›
- $(x_i, y_i)$ï¼šè¡¨ç¤ºç¬¬ $i$ ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œç”±ä¸€ä¸ªè¾“å…¥å’Œä¸€ä¸ªå¯¹åº”çš„è¾“å‡ºç»„æˆã€‚

å°½ç®¡æˆ‘ä»¬ç”¨ä¸€ä¸ªç¬¦å· $x_i$ æ¥è¡¨ç¤ºï¼Œä½† **å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‘é‡**ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªç‰¹å¾ã€‚

### äºŒã€ç¬¦å·å›é¡¾

ä¸‰ã€ä»€ä¹ˆæ˜¯å‡¸ä¼˜åŒ–æ–¹æ³•ï¼Ÿä»€ä¹ˆæ˜¯å¼‚æ­¥SGDï¼Ÿ

åœ¨å‡¸ä¼˜åŒ–é—®é¢˜ä¸­ï¼ˆä¾‹å¦‚é€»è¾‘å›å½’ã€çº¿æ€§å›å½’ç­‰ï¼‰ï¼Œ**åˆ†å¸ƒå¼ä¼˜åŒ–**å·²è¢«å¹¿æ³›ç ”ç©¶ï¼›

- **å‡½æ•°å›¾åƒæ˜¯â€œç¢—â€å½¢çš„ï¼Œå±€éƒ¨æœ€å°å€¼å°±æ˜¯å…¨å±€æœ€å°å€¼**ã€‚
- ç¥ç»ç½‘ç»œæŸå¤±ï¼ˆNeural Networkï¼‰ â€“ éå‡¸å‡½æ•°
    
    - å›¾åƒä¸Šä¸‹èµ·ä¼ï¼Œæœ‰å¤šä¸ªæå°å€¼å’Œæå¤§å€¼ï¼›
    - ç‰¹ç‚¹ï¼šå®¹æ˜“é™·å…¥å±€éƒ¨æœ€å°å€¼ï¼Œè®­ç»ƒç»“æœä¸ç¨³å®š

å¼‚æ­¥SGD:

- å¼‚æ­¥ SGDï¼ˆå¦‚ Google çš„ Parameter Server æ¶æ„ï¼ŒDean et al., [12]ï¼‰åœ¨å¤§è§„æ¨¡è®­ç»ƒç¥ç»ç½‘ç»œä¸­éå¸¸æµè¡Œï¼›
- ä½†åœ¨è”é‚¦å­¦ä¹ ä¸­ï¼Œå®ƒè¦æ±‚å®¢æˆ·ç«¯**é¢‘ç¹é€šä¿¡**ï¼ˆæ¯æ­¥éƒ½åŒæ­¥å‚æ•°æˆ–æ¢¯åº¦ï¼‰ï¼›
- å¯¹äºé€šä¿¡éå¸¸æ˜‚è´µçš„è”é‚¦å­¦ä¹ ç¯å¢ƒï¼Œè¿™ç§æ–¹æ³•**ä»£ä»·è¿‡é«˜ï¼Œä¸ç°å®**ã€‚
    

### âœ… ä»€ä¹ˆæ˜¯å­¦ä¹ ç‡è¡°å‡ï¼ˆLearning Rate Decayï¼‰ï¼Ÿ

**å­¦ä¹ ç‡è¡°å‡** æ˜¯ä¸€ç§è®­ç»ƒæŠ€å·§ï¼š**éšç€è®­ç»ƒè½®æ•°çš„å¢åŠ ï¼Œé€æ­¥é™ä½å­¦ä¹ ç‡ $\eta$**ï¼Œä»è€Œè®©æ¨¡å‹åœ¨è®­ç»ƒåæœŸæ›´ç¨³å®šã€æ›´ç²¾ç»†åœ°æ”¶æ•›ã€‚

### è‹±è¯­è¯ç»„

- â€œstate-of-the-art approachesâ€æœ€å…ˆè¿›çš„æ–¹æ³•ã€‚**SOTA** æ˜¯ **State Of The Art** çš„ç¼©å†™ï¼Œä¸­æ–‡å« **å½“å‰æœ€å…ˆè¿›çš„æ–¹æ³•**ã€‚
- partition åˆ’åˆ†

# é‡ç‚¹ï¼š

ä¸€ã€åŒæ­¥

1. é€šè¿‡å¢åŠ æ¯ä¸ªå®¢æˆ·ç«¯çš„è®¡ç®—ï¼Œè®©æ¯ä¸ªå®¢æˆ·ç«¯åœ¨æ¯ä¸ªé€šä¿¡å›åˆä¹‹é—´æ‰§è¡Œæ›´å¤æ‚çš„è®¡ç®—ï¼Œè€Œä¸æ˜¯æ‰§è¡Œç®€å•çš„è®¡ç®—ã€‚å¯ä»¥å‡å°‘é€šä¿¡æˆæœ¬å’Œæ—¶é—´ã€‚

åœ¨ **FedSGDï¼ˆFederatedSGDï¼‰** ä¸­ï¼Œâ€œåŒæ­¥ï¼ˆsynchronousï¼‰â€çš„å«ä¹‰å°±æ˜¯ï¼š

> **æœåŠ¡å™¨å¿…é¡»ç­‰å¾…æ‰€æœ‰æœ¬è½®é€‰ä¸­çš„å®¢æˆ·ç«¯éƒ½å®Œæˆè®­ç»ƒå¹¶ä¸Šä¼ ç»“æœï¼Œæ‰ä¼šè¿›è¡Œå…¨å±€æ›´æ–°å¹¶è¿›å…¥ä¸‹ä¸€è½®ã€‚**

**äºŒã€FedAvg æˆåŠŸçš„ä¸€ä¸ªå…³é”®åŸå› ** â€”â€” **å®¢æˆ·ç«¯æ¨¡å‹æ‹¥æœ‰å…±åŒçš„åˆå§‹å‚æ•°**ã€‚

ä¸ºä»€ä¹ˆéå‡¸ç½‘ç»œä¸­â€œå‚æ•°å¹³å‡â€æœ‰æ—¶å¤±è´¥ã€æœ‰æ—¶æœ‰æ•ˆï¼Ÿ

âŒ æƒ…å†µä¸€ï¼šä¸åŒåˆå§‹åŒ– â‡’ å¹³å‡å¤±è´¥

- ä¸¤ä¸ªæ¨¡å‹ w å’Œ w'ï¼š
    
    - ä»ä¸åŒéšæœºç‚¹å‡ºå‘ï¼›
    - åœ¨ä¸åŒæ•°æ®å­é›†ä¸Šè®­ç»ƒï¼›
- å¹³å‡åå¯èƒ½æ‰å…¥é«˜æŸå¤±åŒºåŸŸï¼Œæ•ˆæœéå¸¸å·®ã€‚

---

âœ… æƒ…å†µäºŒï¼šç›¸åŒåˆå§‹åŒ– â‡’ å¹³å‡æœ‰æ•ˆ

- ä¸¤ä¸ªæ¨¡å‹ w å’Œ w'ï¼š
    
    - ä»ç›¸åŒéšæœºç‚¹å‡ºå‘ï¼›
    - è®­ç»ƒåèµ°å‘ç›¸è¿‘åŒºåŸŸï¼›
- å‚æ•°å¹³å‡ç»“æœä»å¤„äºä½æŸå¤±åŒºåŸŸï¼Œæ•ˆæœè‰¯å¥½ã€‚

---

âœ… å¯¹ FedAvg çš„å¯ç¤ºï¼š

- FedAvg æ¯è½®æ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä»ç›¸åŒçš„ w_t å‡ºå‘ï¼›
- æ‰€ä»¥å³ä½¿è®­ç»ƒæ•°æ®ä¸åŒï¼Œæœ¬åœ°æ›´æ–°æ¨¡å‹ä¹Ÿä¸ä¼šç›¸å·®å¤ªè¿œï¼›
- æœ€ç»ˆå‚æ•°èšåˆåçš„æ¨¡å‹å¾€å¾€å¤„äºåˆç†åŒºåŸŸï¼Œè®­ç»ƒæ•ˆæœå¥½ã€‚

# ğŸ”¬å®éªŒæ–¹æ³•ï¼š

ä½œè€…é’ˆå¯¹å›¾åƒåˆ†ç±»ï¼ˆMNISTã€CIFAR-10ï¼‰å’Œè¯­è¨€å»ºæ¨¡ï¼ˆèå£«æ¯”äºšæ•°æ®é›†ã€å¤§è§„æ¨¡ç¤¾äº¤ç½‘ç»œæ–‡æœ¬ï¼‰ä¸¤ä¸ªå…¸å‹ä»»åŠ¡å±•å¼€å®éªŒåˆ†æï¼‰

### ï¼ˆä¸€ï¼‰åˆæ­¥å®éªŒï¼ˆMNIST, Shakespeare æ•°æ®é›†ï¼‰

ä½œè€…åœ¨ç›¸å¯¹è¾ƒå°çš„æ•°æ®é›†ï¼ˆMNIST å’Œèå£«æ¯”äºšæ•°æ®é›†ï¼‰ä¸Šåšäº†è¯¦ç»†çš„å‚æ•°åˆ†æï¼Œå®éªŒå‚æ•°åŒ…æ‹¬ï¼š

- å®¢æˆ·ç«¯å‚ä¸ç‡ $C$
- æœ¬åœ°è¿­ä»£æ¬¡æ•° $E$
- æ‰¹é‡å¤§å° $B$
- æ•°æ®åˆ†å¸ƒç±»å‹ï¼ˆIID å’Œ éIIDï¼‰

#### ğŸ“ ä¸»è¦å®éªŒç»“è®ºï¼š

- **å¢å¤§å®¢æˆ·ç«¯å‚ä¸ç‡ $C$** åœ¨è¾ƒå°æ‰¹é‡ï¼ˆB=10ï¼‰ä¸‹æ˜¾è‘—æé«˜éIIDæ•°æ®çš„æ€§èƒ½ï¼Œä½†åœ¨å¤§æ‰¹é‡ï¼ˆB=âˆï¼‰ä¸‹æ•ˆæœä¸€èˆ¬ã€‚
- **å¢åŠ æœ¬åœ°è®¡ç®—é‡ï¼ˆé™ä½Bæˆ–å¢å¤§Eï¼‰** å¯å¤§å¹…é™ä½é€šä¿¡æˆæœ¬ï¼Œå°¤å…¶æ˜¯åœ¨éIIDæ•°æ®ç¯å¢ƒä¸­æ•ˆæœæ˜æ˜¾ã€‚
- éIIDæ•°æ®ç¯å¢ƒä¸­FedAvgè¡¨ç°å‡ºçš„ç¨³å®šæ€§å°¤ä¸ºçªå‡ºï¼Œå³ä½¿æ•°æ®åˆ†å¸ƒä¸¥é‡ä¸å‡ï¼Œä¹Ÿèƒ½ç¨³å®šæ”¶æ•›ã€‚

#### ğŸ“Š æ ¸å¿ƒå‘ç°ï¼š

- FedAvg åœ¨IIDæ•°æ®ä¸‹ï¼Œé€šä¿¡è½®æ•°èƒ½å‡å°‘çº¦35-46å€ï¼›éIIDæ•°æ®ä¸‹ï¼Œä¹Ÿèƒ½å‡å°‘çº¦2.8-3.7å€çš„é€šä¿¡æˆæœ¬ã€‚
- Shakespeareæ•°æ®ï¼ˆéIIDã€éå¹³è¡¡ï¼‰è¡¨ç°å°¤å…¶çªå‡ºï¼šFedAvgçš„åŠ é€Ÿæ•ˆæœé«˜è¾¾95å€ï¼Œä½“ç°å‡ºæœ¬åœ°æ•°æ®é‡å¤§çš„å®¢æˆ·ç«¯èƒ½æœ‰æ•ˆæé«˜æœ¬åœ°è®­ç»ƒæ•ˆæœã€‚

### âœ… 1.table1 table2 ä¸»è¦è§‚å¯Ÿç»“è®º

1. **å°æ‰¹é‡ (B=10) + å¤šå®¢æˆ·ç«¯ (C â‰¥ 0.1) â†’ æ”¶æ•›æ›´å¿«**ï¼›
2. **å¤§æ‰¹é‡ (B=âˆ) ä¸æ˜æ˜¾å—ç›Šäºå¢åŠ å®¢æˆ·ç«¯æ•°é‡**ï¼›
    
    - å¦‚è¡¨æ ¼ä¸­ `B = âˆ` æƒ…å†µä¸‹ï¼Œä» C=0.0 åˆ° C=0.1 æ”¶æ•›é€Ÿåº¦å‡ ä¹ä¸å˜æˆ–åè€Œå˜æ…¢ï¼›
    - åŸå› ï¼šå…¨é‡è®­ç»ƒæ²¡æœ‰å™ªå£°ï¼Œå˜åŒ–ä¸å¤§ï¼Œæ— æ³•å—ç›Šäºå¹¶è¡Œæ€§ï¼›
    - å°æ‰¹é‡èƒ½å¼•å…¥â€œæœ‰ç›Šå™ªå£°â€ï¼Œæ”¹å–„å±€éƒ¨æ”¶æ•›ï¼Œé…åˆå¤šå®¢æˆ·ç«¯æ•ˆæœæ›´æ˜æ˜¾ã€‚
3. **FedAvg ä¸­é»˜è®¤é‡‡ç”¨ C=0.1ï¼Œä½œä¸ºæ€§èƒ½ä¸æ•ˆç‡çš„å¹³è¡¡ç‚¹**ã€‚

### âœ… Epoch çš„ä¸¥æ ¼å®šä¹‰ï¼š

> ä¸€ä¸ª **epoch** æ˜¯â€œå®Œæ•´éå†ä¸€æ¬¡è®­ç»ƒæ•°æ®é›†â€çš„è¿‡ç¨‹ã€‚

### âœ… FedAvg vs FedSGD æ¯”è¾ƒ

> **FedSGD æ˜¯æœ€ç®€å•çš„è”é‚¦ä¼˜åŒ–æ–¹æ³•**ï¼šæ¯è½®åªè®¡ç®—ä¸€æ¬¡æ¢¯åº¦ååŒæ­¥æ›´æ–°ï¼›ä¼ é€’çš„æ˜¯çš„æ¢¯åº¦ã€‚  
> **FedAvg æ˜¯æ›´å®ç”¨çš„ä¼˜åŒ–æ–¹å¼**ï¼šåœ¨å®¢æˆ·ç«¯æœ¬åœ°æ‰§è¡Œå¤šä¸ª epoch çš„è®­ç»ƒï¼Œ**å‡å°‘é€šä¿¡è½®æ•°**ï¼Œæå‡æ•ˆç‡ã€‚ä¼ é€’çš„æ˜¯æ¨¡å‹å‚æ•°ã€‚

---

### ï¼ˆäºŒï¼‰CIFAR-10 å®éªŒ

è¿›ä¸€æ­¥éªŒè¯FedAvgåœ¨æ ‡å‡†çš„å›¾åƒåˆ†ç±»ä»»åŠ¡ä¸Šçš„æœ‰æ•ˆæ€§ï¼ˆæ•°æ®ä¸ºIIDï¼‰ã€‚

#### ğŸ“ å®éªŒè®¾è®¡ï¼š

- CIFAR-10æ•°æ®åˆ’åˆ†åˆ°100ä¸ªå®¢æˆ·ç«¯ï¼ˆæ¯ä¸ªå®¢æˆ·ç«¯500ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œ100ä¸ªæµ‹è¯•æ ·æœ¬ï¼‰ã€‚
- æ¨¡å‹ç»“æ„é‡‡ç”¨TensorFlowæ ‡å‡†æ•™ç¨‹ç½‘ç»œï¼ˆçº¦106ä¸‡å‚æ•°ï¼‰ã€‚
- FedAvgï¼ˆB=50ï¼ŒE=5ï¼ŒC=0.1ï¼‰ä¸æ ‡å‡†SGDã€FedSGDæ¯”è¾ƒã€‚

#### ğŸ“Š ä¸»è¦ç»“è®ºï¼š

- FedAvgåœ¨è¾¾åˆ°ç›®æ ‡ç²¾åº¦æ—¶æ‰€éœ€çš„é€šä¿¡è½®æ•°è¿œä½äºæ ‡å‡†SGDä¸FedSGDï¼Œé€šä¿¡æ•ˆç‡æå‡çº¦50å€ä»¥ä¸Šã€‚
- å³ä½¿ä¸é›†ä¸­å¼è®­ç»ƒçš„SGDï¼ˆæ— è”é‚¦ï¼‰ç›¸æ¯”ï¼ŒFedAvg ä¹Ÿè¡¨ç°æ¥è¿‘ç”šè‡³æ›´ä¼˜ã€‚

---

### ï¼ˆä¸‰ï¼‰å¤§è§„æ¨¡è¯­è¨€å»ºæ¨¡å®éªŒ

ä½¿ç”¨çœŸå®çš„ç¤¾äº¤ç½‘ç»œæ–‡æœ¬ï¼ˆ500,000å®¢æˆ·ç«¯ï¼Œ1000ä¸‡æ¡æ–‡æœ¬æ•°æ®ï¼‰ã€‚

#### ğŸ“ å®éªŒè®¾è®¡ï¼š

- ä»»åŠ¡ä¸ºä¸‹ä¸€ä¸ªå•è¯é¢„æµ‹ï¼ˆé¢„æµ‹è¯æ±‡è¡¨10000ä¸ªè¯ï¼‰ã€‚
- ä½¿ç”¨LSTMæ¨¡å‹ï¼ŒFedAvgä¸FedSGDåœ¨çœŸå®éIIDåœºæ™¯ä¸‹æ¯”è¾ƒï¼ˆE=1, B=8ï¼‰ã€‚

#### ğŸ“Š ä¸»è¦ç»“è®ºï¼š

- FedAvgè¾¾åˆ°ç›®æ ‡ç²¾åº¦ï¼ˆ10.5%ï¼‰æ‰€éœ€é€šä¿¡è½®æ•°ä»…ä¸ºFedSGDçš„1/23ï¼Œè¡¨ç°æ˜æ˜¾ä¼˜äºFedSGDã€‚
- è¾ƒå¤§çš„æœ¬åœ°epochæ•°ï¼ˆE=5ï¼‰å¹¶æœªè¿›ä¸€æ­¥æå‡æ€§èƒ½ï¼Œåè€Œç•¥ä½äºE=1ï¼Œè¡¨æ˜åœ¨éIIDç¯å¢ƒä¸‹ï¼Œè¿‡å¤šæœ¬åœ°è¿­ä»£å¯èƒ½é€ æˆæ¨¡å‹æ¼‚ç§»ï¼ˆmodel driftï¼‰ã€‚

## âœ… FedAvg åœ¨è®­ç»ƒé›†ä¸Šä»èƒ½ä¼˜åŒ–ï¼Œä½†æµ‹è¯•é›†å‡†ç¡®ç‡ä¸å†æå‡ï¼Œè¯´æ˜å·²è¾¾åˆ°æ¨¡å‹æ³›åŒ–æé™ã€‚ Plateauï¼ˆå¹³å°æœŸï¼‰æ„å‘³ç€æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„æ€§èƒ½è¿›å…¥ç¨³å®šï¼Œè¿›ä¸€æ­¥ä¸‹é™æŸå¤±æ— ç›Šã€‚--ã€‹æ¨æµ‹å‡ºè¯¥ç®—æ³•æœ‰æ­£åˆ™åŒ–çš„ä½œç”¨

[Go to annotation](zotero://open-pdf/library/items/B5AKWBL6?page=6&annotation=undefined) â€œWe conjecture that in addition to lowering communication costs, model averaging produces a regularization benefit similar to that achieved by dropout [36].â€ ([McMahan ç­‰, 2016, p. 6](zotero://select/library/items/MST26CBT))

> å¦‚æœè®­ç»ƒæŸå¤±ä¸€ç›´ä¸‹é™ï¼Œè¯´æ˜æ¨¡å‹è¶Šå­¦è¶Šâ€œå¥½â€ï¼Œ  
> é‚£ä¹ˆæµ‹è¯•å‡†ç¡®ç‡ä¸ä¹Ÿåº”è¯¥ç»§ç»­ä¸Šå‡å—ï¼Ÿ  
> ä¸ºä»€ä¹ˆæµ‹è¯•å‡†ç¡®ç‡ plateau äº†ï¼ŸæŸå¤±ä¸‹é™åˆ°å“ªé‡Œå»äº†ï¼Ÿ

## ğŸ” åŸå› ï¼š**è®­ç»ƒæŸå¤±ä¸‹é™ â‰  æµ‹è¯•å‡†ç¡®ç‡ä¸Šå‡**

è¿™èƒŒåçš„æ ¸å¿ƒæ˜¯ **è¿‡æ‹Ÿåˆï¼ˆOverfittingï¼‰**ï¼

### ğŸŒŸ1. è®­ç»ƒæŸå¤±åœ¨ä¸‹é™ï¼š

è¿™åªæ˜¯è¯´æ˜æ¨¡å‹åœ¨â€œè®°ä½â€è®­ç»ƒé›†çš„å†…å®¹ï¼Œè¶Šæ¥è¶Šæ“…é•¿é¢„æµ‹è®­ç»ƒæ•°æ®æœ¬èº«ã€‚

> ä¸¾ä¸ªä¾‹å­ï¼š  
> æ¨¡å‹çœ‹åˆ°â€œè®­ç»ƒæ ·æœ¬ 123 æ˜¯æ•°å­— 9â€ï¼Œå®ƒè®°ä½äº†è¿™ä¸ªæ ·æœ¬çš„ç‰¹å¾ã€‚  
> è¿™æ ·å®ƒèƒ½å‡†ç¡®åœ°é¢„æµ‹è®­ç»ƒé›†ä¸Šçš„æ ‡ç­¾ï¼Œè®­ç»ƒæŸå¤±è‡ªç„¶ä¸‹é™ã€‚

### ğŸ’”2. æµ‹è¯•å‡†ç¡®ç‡ plateau çš„åŸå› ï¼š

æµ‹è¯•é›†æ•°æ®æ²¡å‡ºç°åœ¨è®­ç»ƒé‡Œï¼Œå¯¹æ¨¡å‹æ¥è¯´æ˜¯â€œæ–°æ ·æœ¬â€ã€‚  
å¦‚æœæ¨¡å‹å¤ªè¿‡â€œè®°ä½è®­ç»ƒæ•°æ®ç»†èŠ‚â€ï¼Œ  
å°±ä¼š **å¤±å»æ³›åŒ–èƒ½åŠ›** â€”â€” å¯¹æ–°æ ·æœ¬çš„é¢„æµ‹å‡†ç¡®ç‡ä¸å†æå‡ï¼Œç”šè‡³å˜å·®ã€‚

> æŸå¤±ä¸‹é™çš„åŒæ—¶ï¼Œæ¨¡å‹æ­£åœ¨å­¦â€œè®­ç»ƒé›†çš„å¥‡æ€ªç»†èŠ‚â€  
> ğŸ§  å­¦ä¼šäº†â€œæ­»è®°ç¡¬èƒŒâ€ï¼Œè€Œä¸æ˜¯â€œä¸¾ä¸€åä¸‰â€

âœ… FedAvg **ä¸ä¼šè½»æ˜“è¿‡æ‹Ÿåˆã€ä¹Ÿä¸ä¼šä¸ç¨³å®š**

é’ˆå¯¹æ³›åŒ–èƒ½åŠ›ï¼Œä½œè€…æåˆ°FedAvgä¼šç»§ç»­é™ä½æŸå¤±ï¼Œä½†æ˜¯æµ‹è¯•é›†çš„ç²¾åº¦è¾¾åˆ°å¹³ç¨³ï¼Œå¹¶ä¸ä¼šå› æ­¤ä¸‹é™ã€‚æ‰€ä»¥ä½œè€…è®¤ä¸ºFedAvgç®—æ³•æœ‰ç±»ä¼¼ä¸€ç§â€œæ­£åˆ™åŒ–â€ä½œç”¨ï¼Œå°±åƒ **Dropout** ä¸€æ ·ï¼Œèƒ½é˜²æ­¢æ¨¡å‹é™·å…¥ä¸¥é‡è¿‡æ‹Ÿåˆã€‚

**åœ¨ä¸€äº›ç®—æ³•ä¸­ï¼ŒæŸå¤±ç»§ç»­ä¸‹é™ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆï¼Œæµ‹è¯•å‡†ç¡®ç‡ä¸‹é™**ï¼›ä½† **FedAvg çš„å‚æ•°å¹³å‡æœºåˆ¶èƒ½å¤Ÿå‡ç¼“è¿™ä¸ªé—®é¢˜ï¼Œåœ¨è®­ç»ƒé›†æŸå¤±ä¸‹é™çš„åŒæ—¶ä¿æŒæµ‹è¯•æ€§èƒ½ç¨³å®šç”šè‡³æå‡**ã€‚

### âœ… å¢å¤§ Eï¼ˆæœ¬åœ°è®­ç»ƒepochï¼‰å’Œå‡å° ï¼ˆbatch sizeï¼‰èƒ½å¤§å¤§å‡å°‘é€šä¿¡è½®æ•°

- ä½†è¿‡å¤§çš„ E ä¼šå¸¦æ¥è¿‡æ‹Ÿåˆé£é™©ï¼ˆéå‡¸å‡½æ•°ï¼Œæ¥è¿‘å±€éƒ¨æœ€å°å€¼ã€‚å‚æ•°èšåˆå¤±æ•ˆï¼Œèšåˆï¼ˆå–å¹³å‡ï¼‰è¿™äº›å·®å¼‚æå¤§çš„å±€éƒ¨æœ€ä¼˜ç‚¹ï¼Œä¼šæ‹‰åˆ°ä¸€ä¸ªä¸¤è¾¹éƒ½ä¸å¥½çš„åŒºåŸŸï¼Œç”šè‡³æŠŠæ¨¡å‹æ‹‰å‡ºä»»ä½•ä¸€ä¸ªä½è°·ã€‚ï¼‰ã€‚å°¤å…¶åœ¨ LSTM ä¸Šï¼Œ ä¼šå¯¼è‡´æ¨¡å‹å‘æ•£æˆ–å‡†ç¡®ç‡ä¸‹é™ã€‚
- å»ºè®®ç±»ä¼¼å­¦ä¹ ç‡è¡°å‡ï¼Œ**è®­ç»ƒåæœŸé€‚å½“é™ä½ Eã€‚**

å‰é¢æåˆ°ï¼Œå¢åŠ æ¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„è®¡ç®—é‡ï¼Œä»¥å‡å°‘é€šä¿¡æ•°

[Go to annotation](zotero://open-pdf/library/items/B5AKWBL6?page=3&annotation=undefined) â€œï¼ˆ2) increased computation on each client,â€ ([McMahan ç­‰, 2016, p. 3](zotero://select/library/items/MST26CBT))â€œ

å› æ­¤åœ¨å®éªŒä¸­ï¼š

- å¢åŠ å®¢æˆ·ç«¯æ•°é‡ $C$ï¼šæå‡å¹¶è¡Œåº¦
- å¢åŠ å±€éƒ¨è®­ç»ƒ $E$ã€å‡å° batch size $B$ï¼šæå‡æ¯è½®ä¿¡æ¯åˆ©ç”¨ç‡
- åœ¨èµ„æºå…è®¸æ—¶ï¼Œåº”ä¼˜å…ˆé€‰æ‹©å¢åŠ æœ¬åœ°è®¡ç®—ï¼Œé™ä½é€šä¿¡è½®æ•°

---

## ğŸ“Œ äºŒã€ç§‘ç ”æ€ç»´åŸ¹å…»ï¼šä¸ºä»€ä¹ˆè®¾è®¡è¿™äº›å®éªŒï¼Ÿ

è®¾è®¡å®éªŒçš„ç›®çš„æ˜¯**å›´ç»•æ ¸å¿ƒå‡è®¾ä¸ç›®æ ‡å±•å¼€è®ºè¯ä¸éªŒè¯**ï¼Œè€Œä½œè€…çš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š

- **æå‡º FedAvg ç®—æ³•ï¼ŒéªŒè¯å®ƒåœ¨è”é‚¦å­¦ä¹ ç¯å¢ƒä¸‹çš„æœ‰æ•ˆæ€§ä¸é€šä¿¡æ•ˆç‡ä¼˜åŠ¿**ã€‚
- **ç†è§£ç®—æ³•å¯¹ä¸åŒå‚æ•°ï¼ˆCã€Eã€Bï¼‰çš„æ•æ„Ÿæ€§**ã€‚
- **æ¢ç´¢ç®—æ³•åœ¨ä¸åŒæ•°æ®åˆ†å¸ƒæ¡ä»¶ï¼ˆIIDã€éIIDï¼‰ä¸‹çš„é²æ£’æ€§**ã€‚

ä¸ºå®ç°è¿™äº›ç›®æ ‡ï¼Œä½œè€…çš„å®éªŒè®¾è®¡å…·æœ‰æ¸…æ™°çš„é€»è¾‘ï¼š

|ç§‘ç ”ç›®æ ‡|å®éªŒè®¾è®¡|åŸå› |
|---|---|---|
|åˆæ­¥éªŒè¯ FedAvg|MNISTã€Shakespeare æ•°æ®é›†ä¸Šåˆæ­¥å®éªŒ|æ•°æ®è§„æ¨¡å°ï¼Œä¾¿äºå¿«é€Ÿã€ç»†è‡´è°ƒå‚|
|æ·±å…¥ç†è§£å‚æ•°æ•æ„Ÿæ€§|é€æ­¥æ”¹å˜Cã€Eã€Bè§‚å¯Ÿæ•ˆæœ|æ¢ç´¢å‚æ•°å¦‚ä½•å½±å“è”é‚¦ä¼˜åŒ–æ€§èƒ½|
|éªŒè¯ FedAvg åœ¨æ›´å¤æ‚ä»»åŠ¡ä¸­çš„æ³›åŒ–èƒ½åŠ›|CIFAR-10æ•°æ®é›†ä¸Šå¯¹æ¯”SGDä¸FedSGD|CIFAR-10å¹¿æ³›ç”¨äºåˆ†ç±»åŸºå‡†ï¼Œé€‚åˆéªŒè¯æ–¹æ³•æœ‰æ•ˆæ€§|
|çœŸå®ç¯å¢ƒæ•ˆæœéªŒè¯|å¤§è§„æ¨¡è¯­è¨€å»ºæ¨¡ä»»åŠ¡|æ¥è¿‘çœŸå®åº”ç”¨ï¼ŒéªŒè¯FedAvgå®é™…éƒ¨ç½²çš„è¡¨ç°|

è¿™å¥—å®éªŒé€»è¾‘æ¸…æ™°ä½“ç°äº†ç§‘ç ”ä¸­çš„å…³é”®æ€æƒ³ï¼š

- **ç”±ç®€åˆ°ç¹ã€ç”±å°è§„æ¨¡åˆ°å¤§è§„æ¨¡é€æ­¥éªŒè¯**ã€‚
- **é’ˆå¯¹æ ¸å¿ƒå‡è®¾å±•å¼€å…¨é¢çš„å‚æ•°æ¢ç´¢ä¸æ•æ„Ÿæ€§åˆ†æ**ã€‚
- **åœ¨å®é™…åœºæ™¯ä¸­éªŒè¯æ–¹æ³•çš„å®ç”¨ä»·å€¼**ã€‚

---

## ğŸ“Œ ä¸‰ã€ç¬¬ä¸‰ç« æ•´ä½“å†…å®¹å½’çº³ï¼ˆåŒ…æ‹¬é‡ç‚¹ä¸éš¾ç‚¹ï¼‰

æœ¬ç« çš„æ ¸å¿ƒç›®çš„æ˜¯å±•ç¤º **FedAvg ç®—æ³•åœ¨è”é‚¦å­¦ä¹ ç¯å¢ƒä¸‹çš„ä¼˜è¶Šæ€§ä¸å®ç”¨æ€§**ï¼Œå…·ä½“åŒ…æ‹¬ï¼š

- FedAvgç›¸æ¯”FedSGDå’Œæ ‡å‡†SGDåœ¨**é€šä¿¡æ•ˆç‡ä¸Šæœ‰æ•°é‡çº§çš„ä¼˜åŠ¿**ã€‚
- **å¢åŠ å®¢æˆ·ç«¯å¹¶è¡Œæ•°ï¼ˆCï¼‰** åœ¨å°æ‰¹é‡æƒ…å†µä¸‹å¯¹éIIDæ•°æ®æœ‰æ˜æ˜¾æ•ˆæœã€‚
- **å¢åŠ æœ¬åœ°è®­ç»ƒè½®æ•°ï¼ˆEï¼‰å’Œé™ä½æ‰¹é‡ï¼ˆBï¼‰** èƒ½æœ‰æ•ˆæå‡é€šä¿¡æ•ˆç‡ï¼Œä½†åœ¨éIIDåœºæ™¯ä¸­ä¸èƒ½æ— é™å¢åŠ Eï¼Œä»¥å…æ¨¡å‹æ¼‚ç§»ã€‚
- **FedAvgç®—æ³•çš„å‚æ•°å¹³å‡æœºåˆ¶èµ·åˆ°ç±»ä¼¼æ­£åˆ™åŒ–ï¼ˆå¦‚Dropoutï¼‰çš„ä½œç”¨**ï¼Œåœ¨éIIDæ•°æ®ç¯å¢ƒä¸­èƒ½ä¿æŒæ›´ç¨³å®šçš„æ”¶æ•›è¡¨ç°ã€‚
- å¤§è§„æ¨¡çœŸå®æ•°æ®éªŒè¯ä¸­ï¼ŒFedAvg èƒ½åœ¨çœŸå®ç¯å¢ƒä¸‹è¾¾åˆ°é«˜æ•ˆçš„é€šä¿¡æ”¶æ•›ä¼˜åŠ¿ï¼Œä½“ç°äº†ç°å®åº”ç”¨æ½œåŠ›ã€‚

æ­¤å¤–ï¼Œä½œè€…ç‰¹åˆ«å¼ºè°ƒäº†ï¼š

- **å­¦ä¹ ç‡ï¼ˆÎ·ï¼‰çš„æ•æ„Ÿæ€§ä¸å­¦ä¹ ç‡è¡°å‡çš„é‡è¦æ€§**ï¼Œåœ¨å®éªŒä¸­å‡å¯¹å­¦ä¹ ç‡åšäº†ç»†è‡´è°ƒä¼˜ã€‚
# ğŸ“œ æ€»ç»“ï¼š

ä½œè€…çš„conclusion

é¦–å…ˆå½’çº³è®ºæ–‡çš„ä¸»æ—¨ï¼Œè¯´æ˜äº†ï¼š

- FedAvg **æ˜¾è‘—å‡å°‘äº†é€šä¿¡è½®æ•°**ï¼Œæ˜¯è§£å†³é€šä¿¡ç“¶é¢ˆçš„å…³é”®æ‰‹æ®µï¼›
- FedAvg èƒ½å¤Ÿè®­ç»ƒå‡º **é«˜è´¨é‡æ¨¡å‹**ï¼Œå³æ¨¡å‹æ€§èƒ½å¯ä¸é›†ä¸­å¼è®­ç»ƒåª²ç¾ï¼›
- æ‰€ä»¥ FedAvg æ˜¯ä¸€ç§ **â€œå®ç”¨çš„è”é‚¦å­¦ä¹ ç®—æ³•â€**ï¼ˆfederated learning can be made practicalï¼‰ã€‚

æ¥ç€ä½œè€…å¼ºè°ƒï¼š

> â€œas demonstrated by results on a variety of model architectures: a multi-layer perceptron, two different convolutional NNs, a two-layer character LSTM, and a large-scale word-level LSTM.â€

è¡¨ç¤ºä»–ä»¬åœ¨å¤šä¸ªä»»åŠ¡ä¸æ¨¡å‹ç»“æ„ä¸Šéƒ½åšäº†éªŒè¯ï¼ŒåŒ…æ‹¬ï¼š

- MLPï¼ˆ2NNï¼‰ï¼šæœ€åŸºç¡€çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œï¼›
- CNNï¼ˆMNIST å’Œ CIFAR-10ï¼‰ï¼šå›¾åƒå¤„ç†ä¸»æµæ¶æ„ï¼›
- Character-level LSTMï¼ˆShakespeareï¼‰ï¼šå­—ç¬¦é¢„æµ‹ï¼›
- Word-level LSTMï¼ˆRedditæ•°æ®é›†ï¼‰ï¼šå¤§è§„æ¨¡çœŸå®åœºæ™¯ã€‚

ğŸ“ **è¯´æ˜ FedAvg ä¸ä»…æœ‰æ•ˆï¼Œè€Œä¸”å…·æœ‰â€œå¹¿æ³›é€‚ç”¨æ€§ï¼ˆgeneralityï¼‰â€ã€‚**

ç„¶åæ˜¯æœªæ¥å·¥ä½œå±•æœ›ã€‚