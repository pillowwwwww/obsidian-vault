---
Title: 
tags: 
原始链接:
---

## 从MINE_FL框架的dataset中生成数据集
####  生成Cifar10 NonIID Dir alpha=0.1的数据集、Cifar10 NonIID Pathological 数据集两个
命令：`python generate_cifar10.py noniid balance dir 20 0.1` 
       `python generate_cifar10.py noniid balance pat 20 0`


[[Dirichlet分布]]中的 **concentration 参数 α（alpha）** 是一个控制分布稀疏程度（偏斜程度）的超参数。在联邦学习中使用它来模拟 Non-IID（非独立同分布）数据划分时，α 的取值直接决定了客户端之间数据分布的相似或差异程度。

假设你有 10 个类别，要把每一类的样本分配给 5 个客户端。
你可以为某个类别从 `Dirichlet(α)` 分布中采样一个长度为 5 的概率向量，比如：(p1, p2, p3, p4, p5)
![[image-4.png]]

### 生成的文件夹包括以下内容：
```
├── config.json          # 存储划分的配置信息（如每个客户端的样本索引、类别分布等）
├── rawdata/             # 原始的 CIFAR-10 数据包（下载并解压后的二进制/图像）
├── train/               # 按客户端分好的“训练集”子文件
├── test/                # 按客户端分好的“测试集”子文件
```

### 两种方式的对比
![[image-5.png]]
- **当你想模拟“每个客户端几乎只见到少数类别”时，选 Pathological**；
- **当你想更真实地模拟“每个客户端见到所有类别，但各类别比例不同”时，选 Dirichlet**。
在实际联邦学习实验中：
- Pathological 适用于测试算法对极端非 IID 数据的鲁棒性；    
- Dirichlet 可以方便地通过调整 α 值，得到不同程度的非 IID 情况——例如，α=0.1 时非常稀疏，α=1.0 时中等，α=10.0 时接近 IID。


### balance标签？这与dir分布有什么不一样？
- 在脚本中，我们传递了 `balance=True`，意味着希望在“非 IID，但各客户端样本数大致保持平衡”（总量上尽量相近），而不是某几个客户端拿到过多样本，其他客户端拿到很少。
- 如果 `balance=False`，则客户端样本总量也可能像类别分布一样有偏斜。