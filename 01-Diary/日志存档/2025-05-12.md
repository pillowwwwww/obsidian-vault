---
date: 2025-05-12 15:19:13
tags: dailynote
rating: ⭐
excerpt: 
---

## TODO

- [ ] 多喝水，避免久坐不动
- [ ] 正在复现FedAvg算法，两个框架Flower和pfllib这是什么？
- [ ] 想把fl和大模型结合的框架复现一下
- [ ] 短期目标：1.把研究计划的多模态联邦学习完善，不太确定选哪个方向，但是想先在多模态联邦学习这里进行研究
      2. 想把fl和大模型结合的框架复现一下

## Tracking

- 20:25 配置环境[[环境配置]]
	#### 📌 为什么要使用虚拟环境？
	
	- 虚拟环境（venv）可以为每个项目提供 **独立的依赖环境**，避免项目之间版本冲突
	- 在 Windows 上更推荐使用虚拟环境，因为全局 Python 安装容易和项目混淆
	- 和 Linux 不同，Windows 不会自动隔离 Python 环境，**你必须手动激活虚拟环境**
	
	---
	
	#### ✅ 虚拟环境使用流程（Windows）
	
	```powershell
	# 创建虚拟环境（推荐在项目根目录下）
	python -m venv venv
	
	# 激活虚拟环境（PowerShell）
	.\venv\Scripts\Activate.ps1
	
	# CMD 中激活方式
	.\venv\Scripts\activate.bat
	
	# 安装依赖（确保用的是虚拟环境里的 pip）
	python -m pip install 包名
	```
	
	📌 **注意：** 千万不要直接用 `pip install`，它可能指向全局 pip。
	
	---
	
	#### 🧠 什么是解释器？什么是实际运行的 Python？
	
	- **Python 解释器**就是运行 Python 脚本的程序，比如：
	  ```
	  E:\python\python.exe
	  E:\yourproject\venv\Scripts\python.exe
	  ```
	- 你输入 `python` 命令时，系统会寻找并调用某一个解释器
	- 每个解释器拥有 **自己的 pip 和 site-packages**（库）
	
	📌 **你装的包只会装进你当前调用的解释器下，别的解释器看不到**
	
	---
	
	#### ❓ 为什么我装了包却说 `ModuleNotFoundError`？
	
	- 你很可能使用了一个解释器运行脚本
	- 但 pip 安装包时，用的是另一个解释器的 pip
	- 解决办法：**用 `python -m pip install 包名`**，确保 pip 和解释器绑定一致
	
	---
	
	#### ❗ 为什么 `where python` 在 PowerShell 中不起作用？
	
	- `where` 是 CMD 风格命令，不总能在 PowerShell 中找到虚拟环境里的可执行文件
	- 在虚拟环境中，`python.exe` 不在系统 PATH 中，所以 `where` 查不到
	
	✅ 更推荐使用以下方式判断当前 Python 路径：
	
	```powershell
	# 方法一：PowerShell 专属
	Get-Command python
	
	# 方法二：Python 自己告诉你
	python -c "import sys; print(sys.executable)"
	```
	
	示例输出：
	```
	E:\yourproject\venv\Scripts\python.exe
	```
	
	---
	
	#### ✅ 判断你是否在虚拟环境中
	
	| 方法 | 是否推荐 | 说明 |
	|------|-----------|------|
	| `(venv)` 前缀出现在命令行 | ✅ | 最直观的提示 |
	| `Get-Command python` 显示路径在项目的 `venv` | ✅ | PowerShell 中最靠谱 |
	| `where python` 返回空 | ❌ 不推荐判断方法 |
	| `python -c "import sys; print(sys.executable)"` | ✅ | 最可靠，跨平台通用 |
	
	---

	#### 🔁 总结建议
	
	- ✅ 永远用 `python -m pip install 包名` 安装依赖
	- ✅ 使用虚拟环境（特别是在 Windows 上）
	- ✅ 不依赖 `where python` 判断解释器，推荐用 `sys.executable` 或 `Get-Command`
	- ❗ 安装包 ≠ 当前运行环境，**确保 pip 和 python 来自同一个解释器**



- 15:22 关于FedAvg：联邦学习中的数据集需要将数据划分给多个用户（客户端）每个客户端只使用属于自己的那部分数据进行训练。
		--所以：下载数据集是必要前提，划分数据是联邦学习的本质操作。
		- FedAvg核心步骤：![[Pasted image 20250512155457.png]
			|1|加载配置参数（如模型、数据集、客户端数量、训练轮次等）|
			|2|根据选择的模型和数据集，构建全局模型|
			|3|随机选取客户端子集，分别进行本地训练|
			|4|收集客户端训练后的参数，进行 FedAvg 聚合|
			|5|更新全局模型并评估性能|
			|6|最后测试模型在全局测试集上的性能，并保存训练结果|


- #### 如果用 MLP 处理图像，会发生什么？
    假设你用 MLP 处理 32×32 RGB 图像（即输入维度是 `32×32×3=3072`）：
    `fc1 = nn.Linear(3072, 512)`

	虽然可以跑，但：

	- 会丢失空间信息（比如图中"眼睛"和"嘴巴"之间的相对位置）
    
	- 参数很多，学习效率低
    
	- 精度明显劣于 CNN

	所以：**图像任务几乎都用 CNN，MLP 只作为 baseline 对比。**

- #### 🧩 数据集与模型选择

	##### 二、你的项目中有哪些数据集？

	| 数据集                   | 图像大小    | 通道数    | 推荐模型      | 说明                  |
	| --------------------- | ------- | ------ | --------- | ------------------- |
	| MNIST / Fashion-MNIST | 28 × 28 | 1（灰度图） | CNN 或 MLP | 图像简单，适合用来对比实验       |
	| CIFAR-10              | 32 × 32 | 3（RGB） | CNN       | 图像结构更复杂，MLP 参数太多不适用 |
	
	---

	### 三、实际模型选择建议：什么时候用 CNN，什么时候用 MLP？

	| 场景 | 推荐模型 | 原因 |
	|------|----------|------|
	| 图像数据（如 MNIST、CIFAR） | CNN ✅ | 可以提取图像空间特征，精度高，参数效率好 |
	| 简单图像任务 / 对比实验 | MLP ✅ | 参数多但训练快，可用于 baseline 比较 |
	| 非图像特征（如金融数据、传感器、用户特征） | MLP ✅ | 数据是向量结构，无需空间结构建模 |
	| 快速调试、测试算法正确性 | MLP ✅ | 模型小、训练速度快，方便验证代码流程 |
	
> 	✅ **图像任务默认用 CNN，MLP 适用于一维特征或对比实验。**



